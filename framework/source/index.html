<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>qxWeb source</title>
  <style type="text/css" media="screen">
  body > div {
    padding: 0 40px;
  }

  .hidden {
    display: none;
  }
  </style>
  <link rel="stylesheet" type="text/css" href="../build/resource/qx/css/indigo.css">
  <script type="text/javascript" src="script/q-source.js"></script>
  <script type="text/javascript">
    q.ready(function() {
      // custom binding
      q.$attach({setCustom: function(data) {
        var content = this.getHtml();
        return this.setHtml(data ? content.toLowerCase() : content.toUpperCase());
      }});

      app = q(document.body).app();
      app.addModel("postfix", "!!!");
      app.test = qx.data.marshal.Json.createModel({name: "model value"});

      app.listModel = new qx.data.Array(["a", "b", "c"]);

      // JSON loading
      var store = new qx.data.store.Json("resource/qx/test/primitive.json");
      app.addModel("primitive", null),
      qx.data.SingleValueBinding.bind(store, "model", app, "primitive");

      // TODO binding von {{list[0]}}
    });
  </script>
</head>
<body>

  <div>
    <h3>Only app code required</h3>
    <input
      data-bind="value -> {{mycolor}};
                 style.color -> {{mycolor}};
                 style.font-size -> {{slider}}px;"
      value="red"
      placeholder="type in text color">
  </div>

  <div>
    <h3>Bidirectional binding</h3>
    <input data-bind="value -> {{test.name}}">
    <span data-bind="html -> {{test.name}}{{postfix}}"></span>
  </div>


  <div>
    <h3>Show / Hide / Enabled</h3>
    <label>hide <input type="checkbox" data-bind="checked -> {{hidden}}"></label>
    <label>disabled <input type="checkbox" data-bind="checked -> {{enabled}}"></label>
    <input type="text" data-bind="class.hidden -> {{hidden}}; disabled -> {{enabled}}" value="test">
  </div>


  <div>
    <h3>Select</h3>
    <select data-bind="value -> {{selected}}">
      <option>A</option>
      <option>B</option>
      <option>C</option>
    </select>
    <span data-bind="html -> Selected: {{selected}}"></span>
  </div>


  <div>
    <h3>Widget Binding</h3>
    <div data-qx-widget="qx.ui.form.Slider"
      data-bind="data-qx-config-value -> {{slider}}"
      data-qx-config-value="22"></div>
    <p data-bind="html -> The slider value is {{slider}}."></p>
    <div
      data-qx-widget="qx.ui.List"
      data-bind="data-qx-config-model -> {{listModel}}"></div>
    <p data-bind="show -> {{listModel.length}}"># <span data-bind="html -> {{listModel.length}}"></span> Items in the list</p>
  </div>

  <div>
    <h3>Load via Json Store</h3>
    <p data-bind="html -> {{primitive.string}}"></p>
    <p data-bind="html -> {{primitive.number}}"></p>
    <p data-bind="html -> {{primitive.boolean}}"></p>
  </div>

  <div>
    <h3>Custom key</h3>
    <label>upper case switch <input type="checkbox" data-bind="checked -> {{custom}}" checked></label>
    <span data-bind="custom -> {{custom}}">custom code executed</span>
  </div>

</body>
</html>