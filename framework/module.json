{
  "name" : "module",

  "let"  :
  {
    //"QFILES_VERSION_PART": "-${QOOXDOO_VERSION}"
    "QFILES_VERSION_PART": ""
  },

  "jobs" :
  {
    // generic build jobs
    // ------------------------------------------------------------------

    "website-libraries" :
    {
      "=library" :
      [
        {
           "manifest": "${QOOXDOO_PATH}/framework/Manifest.json"
        }
      ]
    },

    "website-common" :
    {
      "extend" : ["website-libraries"],

      "=include" : "${Q_INCLUDES}",

      "environment" :
      {
        "qx.version" : "${QOOXDOO_VERSION}",
        "qx.globalErrorHandling" : false,
        "qx.debug"   : "${QXDEBUG}",
        "json" : true
      },
      "compile-options" :
      {
        "paths" :
        {
          "file-prefix" : "${QOOXDOO_PATH}/tool/data/generator/copyright.include.js"
        }
      }
    },

    "qxweb-build" :
    {
      "extend" : ["website-common", "build-script"],

      "let" :
      {
        "OPTIMIZE" : ["variants"],
        "Q_INCLUDES" : "${QXWEB_ALL}",
        "BUILD_PATH" : "${SCRIPT_PATH}"
      },

      "compile-options" :
      {

        "code" : {
          "format" : true
        },

        "paths"  :
        {
          "file" : "${BUILD_PATH}/q${QFILES_VERSION_PART}.js",
          "loader-template" : "${QOOXDOO_PATH}/tool/data/generator/website.loader.tmpl.js"
        }
      },

      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qxWeb",
            "compiled-class-size" : false
            },
          "type"   : "using",
          "phase" : null,
          "include-transitive-load-deps" : true,
          "force-fresh-deps" : true,
          "format" : "dot"
        }
      }
    },

    "min-options" :
    {

      "let" : {
        "Q_INCLUDES" : "${QXWEB_ALL}",
        "QXDEBUG" : false
      },

      "compile-options" :
      {
        "code" : {
          "=optimize" : [
            "basecalls",
            "comments",
            "strings",
            "variables",
            "variants",
            /* "statics", */
            "whitespace"
          ],
          "format" : false
        },
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q${QFILES_VERSION_PART}.min.js"
        }
      }
    },

    "qxweb-build-min" :
    {
      "extend" : ["min-options", "qxweb-build"]
    },

    // build separate modules (slice qxWeb into separate js-files)
    // ------------------------------------------------------------------
    //
    // qx.module.Core + qx.module.Animation + ...
    // => tailored qxWeb in n-js-files (core + ...)

    "build-oo" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Oo"
        ]
      },
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-oo${QFILES_VERSION_PART}.js"
        }
      },
      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qx.module.Oo",
            "file" : "oo.dot"
          }
        }
      }
    },

    "build-util" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Util"
        ]
      },
      "exclude" : [ "=qx.module.Oo" ],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-util${QFILES_VERSION_PART}.js"
        }
      },
      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qx.module.Util",
            "file" : "util.dot"
          }
        }
      }
    },

    "build-qxweb" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qxWeb"
        ]
      },
      "exclude" : [ "=qx.module.Oo", "=qx.module.Util" ],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/qxweb${QFILES_VERSION_PART}.js"
        }
      },
      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qxWeb",
            "file" : "qxweb.dot"
          }
        }
      }
    },

    "build-environment" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Environment"
        ]
      },
      "exclude" : [ "=qx.module.Oo", "=qx.module.Util", "=qxWeb" ],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-environment${QFILES_VERSION_PART}.js"
        }
      },
      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qx.module.Environment",
            "file" : "environment.dot"
          }
        }
      }
    },

    "build-attribute" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Attribute"
        ]
      },
      "exclude" : [ "=qx.module.Oo", "=qx.module.Util", "=qxWeb", "=qx.module.Environment" ],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-attribute${QFILES_VERSION_PART}.js"
        }
      },
      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qx.module.Attribute",
            "file" : "attribute.dot"
          }
        }
      }
    },

    "build-css" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Css"
        ]
      },
      "exclude" : [ "=qx.module.Oo", "=qx.module.Util", "=qxWeb", "=qx.module.Environment" ],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-css${QFILES_VERSION_PART}.js"
        }
      },
      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qx.module.Css",
            "file" : "css.dot"
          }
        }
      }
    },

    "build-manipulating" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Manipulating"
        ]
      },
      "exclude" : [ "=qx.module.Oo", "=qx.module.Util", "=qxWeb", "=qx.module.Environment" ],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-manipulating${QFILES_VERSION_PART}.js"
        }
      },
      "log" :
      {
        "dependencies" : {
          "dot" : {
            "root" : "qx.module.Manipulating",
            "file" : "manipulating.dot"
          }
        }
      }
    },


    "build-core" :
    {
      "extend" : ["qxweb-build"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Oo",
          "qx.module.Util",
          "qx.module.Core",
          "qx.module.event.*",
          "qx.bom.Event",
          "qx.bom.Stylesheet",
          "qx.dom.Element",
          "qx.util.Uri"
        ]
      },
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-core${QFILES_VERSION_PART}.js"
        }
      }
    },

    "build-core-min" :
    {
      "extend" : ["build-core", "min-options"],
      "lint-check" : {
        "allowed-globals" : [ "qx.Class" ]
      },
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-core${QFILES_VERSION_PART}.min.js"
        }
      },
      "let" : {
        "QXDEBUG" : false
      }
    },

    "build-module" :
    {
      "extend" : ["qxweb-build"],
      "desc": "abstract job (requires ${MODULE_FILENAME})",
      "lint-check" : {
        "allowed-globals" : [ "qx.Class", "qxWeb" ]
      },
      "config-warnings" : {
        "exclude" : ["=qx.module.Core"]
      },
      "exclude" : ["=qx.module.Core"],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-${MODULE_FILENAME}${QFILES_VERSION_PART}.js",
          "loader-template" : "${QOOXDOO_PATH}/tool/data/generator/website.loader.tmpl.js"
        }
      },
      "let" : {
        "QXDEBUG" : true
      }
    },

    "build-module-min" :
    {
      "extend" : ["qxweb-build-min"],
      "desc": "abstract job (requires ${MODULE_FILENAME})",
      "lint-check" : {
        "allowed-globals" : [ "qx.Class", "qxWeb" ]
      },
      "config-warnings" : {
        "exclude" : ["=qx.module.Core"]
      },
      "exclude" : ["=qx.module.Core"],
      "compile-options" :
      {
        "paths"  :
        {
          "file" : "${BUILD_PATH}/q-${MODULE_FILENAME}${QFILES_VERSION_PART}.min.js",
          "loader-template" : "${QOOXDOO_PATH}/tool/data/generator/website.loader.tmpl.js"
        }
      },
      "let" : {
        "QXDEBUG" : false
      }
    },

    "qxweb-build-module-all" :
    {
      "run" : [
        "build-core",
        "build-module-animation",
        "build-module-blocker",
        "build-module-cookie",
        "build-module-dataset",
        "build-module-dev",
        "build-module-io",
        "build-module-matchmedia",
        "build-module-messaging",
        "build-module-placement",
        "build-module-rest",
        "build-module-storage",
        "build-module-template",
        "build-module-textselection",
        "build-module-transform",
        "build-module-util",
        "build-module-ui"
      ]
    },

    "qxweb-build-module-all-min" :
    {
      "run" : [
        "build-core-min",
        "build-module-animation-min",
        "build-module-blocker-min",
        "build-module-cookie-min",
        "build-module-dataset-min",
        "build-module-dev-min",
        "build-module-io-min",
        "build-module-matchmedia-min",
        "build-module-messaging-min",
        "build-module-placement-min",
        "build-module-rest-min",
        "build-module-storage-min",
        "build-module-template-min",
        "build-module-textselection-min",
        "build-module-transform-min",
        "build-module-util-min",
        "build-module-ui-min"
      ]
    },

    "build-module-animation" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.core", "qx.lang", "qx.bom", "qx.event" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Animation"],
        "MODULE_FILENAME" : "animation"
      }
    },

    "build-module-animation-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.core", "qx.lang", "qx.bom", "qx.event" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Animation"],
        "MODULE_FILENAME" : "animation"
      }
    },

    "build-module-blocker" :
    {
      "extend" : ["build-module"],
      "let" : {
        "Q_INCLUDES": ["qx.module.Blocker"],
        "MODULE_FILENAME" : "blocker"
      }
    },

    "build-module-blocker-min" :
    {
      "extend" : ["build-module-min"],
      "let" : {
        "Q_INCLUDES": ["qx.module.Blocker"],
        "MODULE_FILENAME" : "blocker"
      }
    },

    "build-module-cookie" :
    {
      "extend" : ["build-module"],
      "let" : {
        "Q_INCLUDES": ["qx.module.Cookie"],
        "MODULE_FILENAME" : "cookie"
      }
    },

    "build-module-cookie-min" :
    {
      "extend" : ["build-module-min"],
      "let" : {
        "Q_INCLUDES": ["qx.module.Cookie"],
        "MODULE_FILENAME" : "cookie"
      }
    },

    "build-module-dataset" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang", "qx.bom" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Dataset"],
        "MODULE_FILENAME" : "dataset"
      }
    },

    "build-module-dataset-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang", "qx.bom" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Dataset"],
        "MODULE_FILENAME" : "dataset"
      }
    },

    "build-module-dev" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.dev.FakeServer"],
        "MODULE_FILENAME" : "dev"
      }
    },

    "build-module-dev-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.dev.FakeServer"],
        "MODULE_FILENAME" : "dev"
      }
    },

    "build-module-io" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx", "qx.core", "qx.bom", "qx.event", "qx.util" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Io"],
        "MODULE_FILENAME" : "io"
      }
    },

    "build-module-io-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx", "qx.core", "qx.bom", "qx.event", "qx.util" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Io"],
        "MODULE_FILENAME" : "io"
      }
    },

    "build-module-matchmedia" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx", "qx.core" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.MatchMedia"],
        "MODULE_FILENAME" : "matchmedia"
      }
    },

    "build-module-matchmedia-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx", "qx.core" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.MatchMedia"],
        "MODULE_FILENAME" : "matchmedia"
      }
    },

    "build-module-messaging" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Messaging"],
        "MODULE_FILENAME" : "messaging"
      }
    },

    "build-module-messaging-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Messaging"],
        "MODULE_FILENAME" : "messaging"
      }
    },

    "build-module-placement" :
    {
      "extend" : ["build-module"],
      "let" : {
        "Q_INCLUDES": ["qx.module.Placement"],
        "MODULE_FILENAME" : "placement"
      }
    },

    "build-module-placement-min" :
    {
      "extend" : ["build-module-min"],
      "let" : {
        "Q_INCLUDES": ["qx.module.Placement"],
        "MODULE_FILENAME" : "placement"
      }
    },

    "build-module-rest" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : []
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Rest"],
        "MODULE_FILENAME" : "rest"
      }
    },

    "build-module-rest-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : []
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Rest"],
        "MODULE_FILENAME" : "rest"
      }
    },

    "build-module-storage" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.core", "qx.lang" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Storage"],
        "MODULE_FILENAME" : "storage"
      }
    },

    "build-module-storage-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.core", "qx.lang" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Storage"],
        "MODULE_FILENAME" : "storage"
      }
    },

    "build-module-template" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.dom.Element" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Template"],
        "MODULE_FILENAME" : "template"
      }
    },

    "build-module-template-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.dom.Element" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Template"],
        "MODULE_FILENAME" : "template"
      }
    },

    "build-module-textselection" :
    {
      "extend" : ["build-module"],
      "let" : {
        "Q_INCLUDES": ["qx.module.TextSelection"],
        "MODULE_FILENAME" : "textselection"
      }
    },

    "build-module-textselection-min" :
    {
      "extend" : ["build-module-min"],
      "let" : {
        "Q_INCLUDES": ["qx.module.TextSelection"],
        "MODULE_FILENAME" : "textselection"
      }
    },

    "build-module-transform" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.bom", "qx.core" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Transform"],
        "MODULE_FILENAME" : "transform"
      }
    },

    "build-module-transform-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.bom", "qx.core" ]
      },
      "let" : {
        "Q_INCLUDES": ["qx.module.Transform"],
        "MODULE_FILENAME" : "transform"
      }
    },

    "build-module-util" :
    {
      "extend" : ["build-module"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang.String", "qx.lang.Array" ]
      },
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.util.Array",
          "qx.module.util.String",
          "qx.module.util.Type",
          "qx.module.util.Object",
          "qx.module.util.Function"
        ],
        "MODULE_FILENAME" : "util"
      }
    },

    "build-module-util-min" :
    {
      "extend" : ["build-module-min"],
      "lint-check" : {
        "allowed-globals" : [ "qx.lang.String", "qx.lang.Array" ]
      },
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.util.Array",
          "qx.module.util.String",
          "qx.module.util.Type",
          "qx.module.util.Object",
          "qx.module.util.Function"
        ],
        "MODULE_FILENAME" : "util"
      }
    },


    "build-module-ui" :
    {
      "extend" : ["build-module"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Ui"
        ],
        "MODULE_FILENAME" : "ui"
      }
    },

    "build-module-ui-min" :
    {
      "extend" : ["build-module-min"],
      "let" : {
        "Q_INCLUDES" : [
          "qx.module.Ui"
        ],
        "MODULE_FILENAME" : "ui"
      }
    }

  }
}
